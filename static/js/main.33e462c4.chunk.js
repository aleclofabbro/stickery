(this.webpackJsonpstickery=this.webpackJsonpstickery||[]).push([[0],{13:function(e,t,n){},20:function(e,t){},21:function(e,t){},22:function(e,t){},23:function(e,t,n){"use strict";n.r(t);var r,c=n(0),a=n.n(c),o=n(5),i=n.n(o),u=(n(13),function(e){var t=e.Canvas,n=e.TopBar;return a.a.createElement("div",{style:l},a.a.createElement("div",{style:s},n),a.a.createElement("div",{style:f},t))}),l={position:"fixed",left:0,top:0,right:0,bottom:0},s={position:"fixed",left:0,top:0,right:0,bottom:"95%",backgroundColor:"#262626"},f={position:"fixed",left:0,top:"5%",right:0,bottom:0,backgroundColor:"#1a1a1a"},d=n(1),b=function(e){var t=e.onClick,n=e.style,r=e.children;return a.a.createElement("button",{onClick:t,style:n},r)},v=function(e){var t=e.onClick,n=e.children;return a.a.createElement(b,{style:m,onClick:t},n)},m={float:"left",backgroundColor:"gray"},p=function(e){var t=e.onClickOut,n=e.children,r=Object(c.useRef)(null);Object(c.useEffect)((function(){if(r.current){var e=r.current,t=r.current.parentElement;return document.body.appendChild(e),function(){t&&t.appendChild(e)}}}),[]);var o=Object(c.useCallback)((function(e){e.target===e.currentTarget&&t()}),[t]);return a.a.createElement("div",{id:"modal",ref:r,style:E,onClick:o},a.a.createElement("div",{style:g},n))},g={position:"fixed",left:"5%",top:"5%",right:"5%",bottom:"5%",backgroundColor:"#1a1a1a"},E={position:"fixed",left:0,top:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.7)"},h=function(e){var t=e.closeModal,n=e.isModalOpen,r=e.openModal,c=e.importFile;return a.a.createElement(a.a.Fragment,null,a.a.createElement(v,{onClick:r},"Sfondo"),n&&a.a.createElement(p,{onClickOut:t},a.a.createElement(b,{onClick:c},"scegli file"),a.a.createElement("br",null),a.a.createElement("span",null,"o incolla")))},k=n(6),O=n.n(k),C=n(2),j=n(7),y=function(e,t){var n=w(e,t);return console.log(n),n},w=function(e,t){switch(t.t){case"bg":return L(e,t.p)}return e},L=(r="background",function(e,t){return Object(j.a)({},e,Object(C.a)({},r,t))}),x={background:null},M=Object(c.createContext)({}),R=function(){return Object(c.useContext)(M)},B=function(e){var t=e.children,n=Object(c.useReducer)(y,x),r=Object(d.a)(n,2),o={state:r[0],dispatch:r[1]};return a.a.createElement(M.Provider,{value:o},t)},F=function(){var e=function(e){var t=Object(c.useState)(!1),n=Object(d.a)(t,2),r=n[0],a=n[1],o=Object(c.useCallback)((function(){return a(!1)}),[]),i=Object(c.useCallback)((function(){return a(!0)}),[]),u=Object(c.useCallback)((function(){return a(!r)}),[r]);return[r,i,o,u,a]}(),t=Object(d.a)(e,3),n=t[0],r=t[1],o=t[2],i=R().dispatch,u=function(e){var t=e.fileChoosen,n=Object(c.useRef)(null),r=Object(c.useCallback)((function(){return n.current&&n.current.click()}),[]);return Object(c.useEffect)((function(){var e=document.createElement("input");e.setAttribute("type","file"),e.style.display="none";var r=function(){var n=e.files&&e.files.length>0&&e.files[0];n&&t(n,"fs")};return e.addEventListener("change",r),document.body.appendChild(e),n.current=e,function(){e.removeEventListener("change",r),document.body.removeChild(e),n.current=null}}),[t]),Object(c.useEffect)((function(){var e=function(e){var n=e.clipboardData;if(n&&n.files&&n.files.length>0){var r=n.files[0];t(r,"paste")}};return document.body.addEventListener("paste",e),function(){document.body.removeEventListener("paste",e)}}),[t]),Object(c.useEffect)((function(){var e=function(e){var n=e.dataTransfer;if(n&&n.files.length>0){var r=n.files[0];t(r,"paste")}};return document.body.addEventListener("drop",e),function(){document.body.removeEventListener("drop",e)}}),[t]),[r]}({fileChoosen:Object(c.useCallback)((function(e){(function(e){var t;return O.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=URL.createObjectURL(e),n.abrupt("return",t);case 2:case"end":return n.stop()}}))})(e).then((function(e){return i({t:"bg",p:e})}))}),[i])}),l=Object(d.a)(u,1)[0];return a.a.createElement(h,{importFile:l,closeModal:o,isModalOpen:n,openModal:r})},T=n(3),W=function(){var e=Object(c.useRef)(null),t=Object(c.useRef)(),n=R().state;Object(c.useEffect)((function(){e.current&&(t.current=new T.fabric.Canvas(e.current,H))}),[]);var r=Object(c.useCallback)((function(){var e=t.current;if(e)if(e.setHeight(window.innerHeight),e.setWidth(window.innerWidth),n.background){var r=n.background;e.setBackgroundImage(r,(function(){T.fabric.Image.fromURL(r,(function(t){var n=Math.min(e.getHeight()/(t.height||1),e.getWidth()/(t.width||1));e.setZoom(n),e.renderAll()}))}))}else e.renderAll()}),[n.background]);return Object(c.useEffect)(r,[n.background,r]),Object(c.useEffect)((function(){return window.addEventListener("resize",r,!1),function(){window.removeEventListener("resize",r,!1)}}),[r]),a.a.createElement("canvas",{style:A,ref:e})},A={position:"absolute",top:0,bottom:0,left:0,right:0},H={interactive:!0};i.a.render(a.a.createElement((function(e){var t=e.children;return a.a.createElement(B,null,t)}),null,a.a.createElement((function(){var e=Object(c.useMemo)((function(){return{TopBar:a.a.createElement(a.a.Fragment,null,a.a.createElement(F,null)),Canvas:a.a.createElement(W,null)}}),[]);return a.a.createElement(u,e)}),null)),document.getElementById("root")),navigator.serviceWorker.register("sw.js")},8:function(e,t,n){e.exports=n(23)}},[[8,1,2]]]);
//# sourceMappingURL=main.33e462c4.chunk.js.map